<!DOCTYPE html>
<html>
<head>
    <title>Community Source of Truth</title>
    <style>
        body { font-family: -apple-system, sans-serif; padding: 40px; max-width: 800px; margin: auto; line-height: 1.6; }
        .card { border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-top: 20px; background: #fafafa; }
        .btn-add { background: #0969da; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block; font-weight: bold; }
        .suggest-link { float: right; color: #0969da; font-weight: bold; text-decoration: none; }
        .status-tag { font-size: 0.8em; color: #666; font-style: italic; }
    </style>
</head>
<body>
    <h1>üè° Community Information Hub</h1>
    <p>Public "Source of Truth". To suggest a change, click the link on any card.</p>
    
    <a href="https://github.com/dekumar2-lab/community-hub/issues/new?title=New+Area+Request&body=Please+add+details+about+the+new+area+here." class="btn-add">+ Propose New Area</a>

    <div id="directory">Loading community data...</div>

    <script>
        const USER = 'dekumar2-lab';
        const REPO = 'community-hub';

        async function loadData() {
            const container = document.getElementById('directory');
            try {
                const res = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/clusters`);
                const files = await res.json();
                container.innerHTML = '';

                files.forEach(file => {
                    if(file.name.endsWith('.md')) {
                        const name = file.name.replace('.md', '').replace(/-/g, ' ');
                        const div = document.createElement('div');
                        div.className = 'card';
                        div.innerHTML = `
                            <a href="https://github.com/dekumar2-lab/community-hub/issues/new?title=Update+Request:+${name}&body=Suggested+changes+for+${name}:" class="suggest-link">Suggest Edit</a>
                            <h3>${name.toUpperCase()}</h3>
                            <span class="status-tag">Verified Source of Truth</span>
                        `;
                        container.appendChild(div);
                    }
                });
            } catch (e) {
                container.innerHTML = '<p>No areas found. Use the blue button above to propose the first one!</p>';
            }
        }
        loadData();
    </script>
</body>
</html>
