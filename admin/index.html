<!DOCTYPE html>
<html>
<head>
    <title>Community Hub Debug</title>
    <style>
        body { font-family: sans-serif; padding: 40px; max-width: 800px; margin: auto; }
        .error-box { background: #fee; border: 1px solid #f99; padding: 15px; color: #900; }
        .card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .btn { background: #007bff; color: white; padding: 10px; text-decoration: none; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üè° Community Hub</h1>
    
    <div style="margin-bottom: 30px; padding: 20px; background: #f0f7ff; border-radius: 8px;">
        <strong>Can't see your data?</strong><br>
        <a href="https://github.com/dekumar2-lab/community-hub/issues/new" class="btn">Click Here to Propose a New Area</a>
    </div>

    <div id="directory">Checking for data...</div>

    <script>
        const USER = 'dekumar2-lab';
        const REPO = 'community-hub';

        async function loadData() {
            const container = document.getElementById('directory');
            try {
                console.log("Fetching from GitHub...");
                const res = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/clusters`);
                
                if (!res.ok) {
                    throw new Error(`GitHub API returned ${res.status}. Do you have a folder named 'clusters'?`);
                }

                const files = await res.json();
                console.log("Files found:", files);

                if (files.length === 0) {
                    container.innerHTML = "<p>The 'clusters' folder is empty.</p>";
                    return;
                }

                container.innerHTML = '';
                files.forEach(file => {
                    if(file.name.endsWith('.md')) {
                        const name = file.name.replace('.md', '').replace(/-/g, ' ');
                        const div = document.createElement('div');
                        div.className = 'card';
                        div.innerHTML = `
                            <h3>${name.toUpperCase()}</h3>
                            <a href="https://github.com/${USER}/${REPO}/issues/new?title=Update+${name}">Suggest Edit</a>
                        `;
                        container.appendChild(div);
                    }
                });
            } catch (e) {
                console.error(e);
                container.innerHTML = `<div class="error-box"><strong>Error:</strong> ${e.message}</div>`;
            }
        }
        loadData();
    </script>
</body>
</html>
